var n={650:(t,n)=>{}},e={};function o(t){var i=e[t];if(void 0!==i)return i.exports;var r=e[t]={exports:{}};return n[t](r,r.exports,o),r.exports}o.d=(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n);var i={};(()=>{function n(t){let n="";for(const o of t)n+="string"!=typeof o?e(o):o;return n}function e(t){return function(t){for(const e of t){const t=n(e);if(t.length>0)return t}return""}(t.children)}function r(t,n,e){const o=function(t,n,e){const o=e[n];return void 0===o?[]:o[t]??[]}(t,n,e);if(0!==o.length)return o[o.length-1]}o.d(i,{CD:()=>at,W7:()=>st,aC:()=>L,cd:()=>lt,ib:()=>rt,Zg:()=>ot,rY:()=>W,in:()=>J,$U:()=>it,AY:()=>ct}),o(650);const{abs:s,cos:c,sin:l,acos:a,atan2:u,sqrt:h,pow:f}=Math;function p(t){return t<0?-f(-t,1/3):f(t,1/3)}const y=Math.PI,x=2*y,d=y/2,g=Number.MAX_SAFE_INTEGER||9007199254740991,m=Number.MIN_SAFE_INTEGER||-9007199254740991,w={x:0,y:0,z:0},b={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,n){const e=n(t);let o=e.x*e.x+e.y*e.y;return void 0!==e.z&&(o+=e.z*e.z),h(o)},compute:function(t,n,e){if(0===t)return n[0].t=0,n[0];const o=n.length-1;if(1===t)return n[o].t=1,n[o];const i=1-t;let r=n;if(0===o)return n[0].t=t,n[0];if(1===o){const n={x:i*r[0].x+t*r[1].x,y:i*r[0].y+t*r[1].y,t};return e&&(n.z=i*r[0].z+t*r[1].z),n}if(o<4){let n,s,c,l=i*i,a=t*t,u=0;2===o?(r=[r[0],r[1],r[2],w],n=l,s=i*t*2,c=a):3===o&&(n=l*i,s=l*t*3,c=i*a*3,u=t*a);const h={x:n*r[0].x+s*r[1].x+c*r[2].x+u*r[3].x,y:n*r[0].y+s*r[1].y+c*r[2].y+u*r[3].y,t};return e&&(h.z=n*r[0].z+s*r[1].z+c*r[2].z+u*r[3].z),h}const s=JSON.parse(JSON.stringify(n));for(;s.length>1;){for(let n=0;n<s.length-1;n++)s[n]={x:s[n].x+(s[n+1].x-s[n].x)*t,y:s[n].y+(s[n+1].y-s[n].y)*t},void 0!==s[n].z&&(s[n]=s[n].z+(s[n+1].z-s[n].z)*t);s.splice(s.length-1,1)}return s[0].t=t,s[0]},computeWithRatios:function(t,n,e,o){const i=1-t,r=e,s=n;let c,l=r[0],a=r[1],u=r[2],h=r[3];return l*=i,a*=t,2===s.length?(c=l+a,{x:(l*s[0].x+a*s[1].x)/c,y:(l*s[0].y+a*s[1].y)/c,z:!!o&&(l*s[0].z+a*s[1].z)/c,t}):(l*=i,a*=2*i,u*=t*t,3===s.length?(c=l+a+u,{x:(l*s[0].x+a*s[1].x+u*s[2].x)/c,y:(l*s[0].y+a*s[1].y+u*s[2].y)/c,z:!!o&&(l*s[0].z+a*s[1].z+u*s[2].z)/c,t}):(l*=i,a*=1.5*i,u*=3*i,h*=t*t*t,4===s.length?(c=l+a+u+h,{x:(l*s[0].x+a*s[1].x+u*s[2].x+h*s[3].x)/c,y:(l*s[0].y+a*s[1].y+u*s[2].y+h*s[3].y)/c,z:!!o&&(l*s[0].z+a*s[1].z+u*s[2].z+h*s[3].z)/c,t}):void 0))},derive:function(t,n){const e=[];for(let o=t,i=o.length,r=i-1;i>1;i--,r--){const t=[];for(let e,i=0;i<r;i++)e={x:r*(o[i+1].x-o[i].x),y:r*(o[i+1].y-o[i].y)},n&&(e.z=r*(o[i+1].z-o[i].z)),t.push(e);e.push(t),o=t}return e},between:function(t,n,e){return n<=t&&t<=e||b.approximately(t,n)||b.approximately(t,e)},approximately:function(t,n,e){return s(t-n)<=(e||1e-6)},length:function(t){const n=b.Tvalues.length;let e=0;for(let o,i=0;i<n;i++)o=.5*b.Tvalues[i]+.5,e+=b.Cvalues[i]*b.arcfn(o,t);return.5*e},map:function(t,n,e,o,i){return o+(t-n)/(e-n)*(i-o)},lerp:function(t,n,e){const o={x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)};return void 0!==n.z&&void 0!==e.z&&(o.z=n.z+t*(e.z-n.z)),o},pointToString:function(t){let n=t.x+"/"+t.y;return void 0!==t.z&&(n+="/"+t.z),n},pointsToString:function(t){return"["+t.map(b.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,n,e){const o=n.x-t.x,i=n.y-t.y,r=e.x-t.x,s=e.y-t.y;return u(o*s-i*r,o*r+i*s)},round:function(t,n){const e=""+t,o=e.indexOf(".");return parseFloat(e.substring(0,o+1+n))},dist:function(t,n){const e=t.x-n.x,o=t.y-n.y;return h(e*e+o*o)},closest:function(t,n){let e,o,i=f(2,63);return t.forEach((function(t,r){o=b.dist(n,t),o<i&&(i=o,e=r)})),{mdist:i,mpos:e}},abcratio:function(t,n){if(2!==n&&3!==n)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const e=f(t,n)+f(1-t,n);return s((e-1)/e)},projectionratio:function(t,n){if(2!==n&&3!==n)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const e=f(1-t,n);return e/(f(t,n)+e)},lli8:function(t,n,e,o,i,r,s,c){const l=(t-e)*(r-c)-(n-o)*(i-s);return 0!=l&&{x:((t*o-n*e)*(i-s)-(t-e)*(i*c-r*s))/l,y:((t*o-n*e)*(r-c)-(n-o)*(i*c-r*s))/l}},lli4:function(t,n,e,o){const i=t.x,r=t.y,s=n.x,c=n.y,l=e.x,a=e.y,u=o.x,h=o.y;return b.lli8(i,r,s,c,l,a,u,h)},lli:function(t,n){return b.lli4(t,t.c,n,n.c)},makeline:function(t,n){const e=t.x,o=t.y,i=n.x,r=n.y,s=(i-e)/3,c=(r-o)/3;return new T(e,o,e+s,o+c,e+2*s,o+2*c,i,r)},findbbox:function(t){let n=g,e=g,o=m,i=m;return t.forEach((function(t){const r=t.bbox();n>r.x.min&&(n=r.x.min),e>r.y.min&&(e=r.y.min),o<r.x.max&&(o=r.x.max),i<r.y.max&&(i=r.y.max)})),{x:{min:n,mid:(n+o)/2,max:o,size:o-n},y:{min:e,mid:(e+i)/2,max:i,size:i-e}}},shapeintersections:function(t,n,e,o,i){if(!b.bboxoverlap(n,o))return[];const r=[],s=[t.startcap,t.forward,t.back,t.endcap],c=[e.startcap,e.forward,e.back,e.endcap];return s.forEach((function(n){n.virtual||c.forEach((function(o){if(o.virtual)return;const s=n.intersects(o,i);s.length>0&&(s.c1=n,s.c2=o,s.s1=t,s.s2=e,r.push(s))}))})),r},makeshape:function(t,n,e){const o=n.points.length,i=t.points.length,r=b.makeline(n.points[o-1],t.points[0]),s=b.makeline(t.points[i-1],n.points[0]),c={startcap:r,forward:t,back:n,endcap:s,bbox:b.findbbox([r,t,n,s]),intersections:function(t){return b.shapeintersections(c,c.bbox,t,t.bbox,e)}};return c},getminmax:function(t,n,e){if(!e)return{min:0,max:0};let o,i,r=g,s=m;-1===e.indexOf(0)&&(e=[0].concat(e)),-1===e.indexOf(1)&&e.push(1);for(let c=0,l=e.length;c<l;c++)o=e[c],i=t.get(o),i[n]<r&&(r=i[n]),i[n]>s&&(s=i[n]);return{min:r,mid:(r+s)/2,max:s,size:s-r}},align:function(t,n){const e=n.p1.x,o=n.p1.y,i=-u(n.p2.y-o,n.p2.x-e);return t.map((function(t){return{x:(t.x-e)*c(i)-(t.y-o)*l(i),y:(t.x-e)*l(i)+(t.y-o)*c(i)}}))},roots:function(t,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const e=t.length-1,o=b.align(t,n),i=function(t){return 0<=t&&t<=1};if(2===e){const t=o[0].y,n=o[1].y,e=o[2].y,r=t-2*n+e;if(0!==r){const o=-h(n*n-t*e),s=-t+n;return[-(o+s)/r,-(-o+s)/r].filter(i)}return n!==e&&0===r?[(2*n-e)/(2*n-2*e)].filter(i):[]}const r=o[0].y,s=o[1].y,l=o[2].y;let u=3*s-r-3*l+o[3].y,f=3*r-6*s+3*l,y=-3*r+3*s,d=r;if(b.approximately(u,0)){if(b.approximately(f,0))return b.approximately(y,0)?[]:[-d/y].filter(i);const t=h(y*y-4*f*d),n=2*f;return[(t-y)/n,(-y-t)/n].filter(i)}f/=u,y/=u,d/=u;const g=(3*y-f*f)/3,m=g/3,w=(2*f*f*f-9*f*y+27*d)/27,v=w/2,z=v*v+m*m*m;let _,k,E,S,A;if(z<0){const t=-g/3,n=h(t*t*t),e=-w/(2*n),o=a(e<-1?-1:e>1?1:e),r=2*p(n);return E=r*c(o/3)-f/3,S=r*c((o+x)/3)-f/3,A=r*c((o+2*x)/3)-f/3,[E,S,A].filter(i)}if(0===z)return _=v<0?p(-v):-p(v),E=2*_-f/3,S=-_-f/3,[E,S].filter(i);{const t=h(z);return _=p(-v+t),k=p(v+t),[_-k-f/3].filter(i)}},droots:function(t){if(3===t.length){const n=t[0],e=t[1],o=t[2],i=n-2*e+o;if(0!==i){const t=-h(e*e-n*o),r=-n+e;return[-(t+r)/i,-(-t+r)/i]}return e!==o&&0===i?[(2*e-o)/(2*(e-o))]:[]}if(2===t.length){const n=t[0],e=t[1];return n!==e?[n/(n-e)]:[]}return[]},curvature:function(t,n,e,o,i){let r,c,l,a,u=0,p=0;const y=b.compute(t,n),x=b.compute(t,e),d=y.x*y.x+y.y*y.y;if(o?(r=h(f(y.y*x.z-x.y*y.z,2)+f(y.z*x.x-x.z*y.x,2)+f(y.x*x.y-x.x*y.y,2)),c=f(d+y.z*y.z,1.5)):(r=y.x*x.y-y.y*x.x,c=f(d,1.5)),0===r||0===c)return{k:0,r:0};if(u=r/c,p=c/r,!i){const i=b.curvature(t-.001,n,e,o,!0).k,r=b.curvature(t+.001,n,e,o,!0).k;a=(r-u+(u-i))/2,l=(s(r-u)+s(u-i))/2}return{k:u,r:p,dk:a,adk:l}},inflections:function(t){if(t.length<4)return[];const n=b.align(t,{p1:t[0],p2:t.slice(-1)[0]}),e=n[2].x*n[1].y,o=n[3].x*n[1].y,i=n[1].x*n[2].y,r=18*(-3*e+2*o+3*i-n[3].x*n[2].y),s=18*(3*e-o-3*i),c=18*(i-e);if(b.approximately(r,0)){if(!b.approximately(s,0)){let t=-c/s;if(0<=t&&t<=1)return[t]}return[]}const l=s*s-4*r*c,a=Math.sqrt(l),u=2*r;return b.approximately(u,0)?[]:[(a-s)/u,-(s+a)/u].filter((function(t){return 0<=t&&t<=1}))},bboxoverlap:function(t,n){const e=["x","y"],o=e.length;for(let i,r,c,l,a=0;a<o;a++)if(i=e[a],r=t[i].mid,c=n[i].mid,l=(t[i].size+n[i].size)/2,s(r-c)>=l)return!1;return!0},expandbox:function(t,n){n.x.min<t.x.min&&(t.x.min=n.x.min),n.y.min<t.y.min&&(t.y.min=n.y.min),n.z&&n.z.min<t.z.min&&(t.z.min=n.z.min),n.x.max>t.x.max&&(t.x.max=n.x.max),n.y.max>t.y.max&&(t.y.max=n.y.max),n.z&&n.z.max>t.z.max&&(t.z.max=n.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,n,e){const o=t.bbox(),i=n.bbox(),r=1e5,s=e||.5;if(o.x.size+o.y.size<s&&i.x.size+i.y.size<s)return[(r*(t._t1+t._t2)/2|0)/r+"/"+(r*(n._t1+n._t2)/2|0)/r];let c=t.split(.5),l=n.split(.5),a=[{left:c.left,right:l.left},{left:c.left,right:l.right},{left:c.right,right:l.right},{left:c.right,right:l.left}];a=a.filter((function(t){return b.bboxoverlap(t.left.bbox(),t.right.bbox())}));let u=[];return 0===a.length||(a.forEach((function(t){u=u.concat(b.pairiteration(t.left,t.right,s))})),u=u.filter((function(t,n){return u.indexOf(t)===n}))),u},getccenter:function(t,n,e){const o=n.x-t.x,i=n.y-t.y,r=e.x-n.x,s=e.y-n.y,a=o*c(d)-i*l(d),h=o*l(d)+i*c(d),f=r*c(d)-s*l(d),p=r*l(d)+s*c(d),y=(t.x+n.x)/2,g=(t.y+n.y)/2,m=(n.x+e.x)/2,w=(n.y+e.y)/2,v=y+a,z=g+h,_=m+f,k=w+p,E=b.lli8(y,g,v,z,m,w,_,k),S=b.dist(E,t);let A,M=u(t.y-E.y,t.x-E.x),C=u(n.y-E.y,n.x-E.x),T=u(e.y-E.y,e.x-E.x);return M<T?((M>C||C>T)&&(M+=x),M>T&&(A=T,T=M,M=A)):T<C&&C<M?(A=T,T=M,M=A):T+=x,E.s=M,E.e=T,E.r=S,E},numberSort:function(t,n){return t-n}};class v{constructor(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(t){return b.pointsToString(t.points)})).join(", ")+"]"}addCurve(t){this.curves.push(t),this._3d=this._3d||t._3d}length(){return this.curves.map((function(t){return t.length()})).reduce((function(t,n){return t+n}))}curve(t){return this.curves[t]}bbox(){const t=this.curves;for(var n=t[0].bbox(),e=1;e<t.length;e++)b.expandbox(n,t[e].bbox());return n}offset(t){const n=[];return this.curves.forEach((function(e){n.push(...e.offset(t))})),new v(n)}}const{abs:z,min:_,max:k,cos:E,sin:S,acos:A,sqrt:M}=Math,C=Math.PI;class T{constructor(t){let n=t&&t.forEach?t:Array.from(arguments).slice(),e=!1;if("object"==typeof n[0]){e=n.length;const t=[];n.forEach((function(n){["x","y","z"].forEach((function(e){void 0!==n[e]&&t.push(n[e])}))})),n=t}let o=!1;const i=n.length;if(e){if(e>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(6!==i&&8!==i&&9!==i&&12!==i&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const r=this._3d=!o&&(9===i||12===i)||t&&t[0]&&void 0!==t[0].z,s=this.points=[];for(let t=0,e=r?3:2;t<i;t+=e){var c={x:n[t],y:n[t+1]};r&&(c.z=n[t+2]),s.push(c)}const l=this.order=s.length-1,a=this.dims=["x","y"];r&&a.push("z"),this.dimlen=a.length;const u=b.align(s,{p1:s[0],p2:s[l]});this._linear=!u.some((t=>z(t.y)>1e-4)),this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(t,n,e,o){if(void 0===o&&(o=.5),0===o)return new T(n,n,e);if(1===o)return new T(t,n,n);const i=T.getABC(2,t,n,e,o);return new T(t,i.A,e)}static cubicFromPoints(t,n,e,o,i){void 0===o&&(o=.5);const r=T.getABC(3,t,n,e,o);void 0===i&&(i=b.dist(n,r.C));const s=i*(1-o)/o,c=b.dist(t,e),l=(e.x-t.x)/c,a=(e.y-t.y)/c,u=i*l,h=i*a,f=s*l,p=s*a,y=n.x-u,x=n.y-h,d=n.x+f,g=n.y+p,m=r.A,w=m.x+(y-m.x)/(1-o),v=m.y+(x-m.y)/(1-o),z=m.x+(d-m.x)/o,_=m.y+(g-m.y)/o,k={x:t.x+(w-t.x)/o,y:t.y+(v-t.y)/o},E={x:e.x+(z-e.x)/(1-o),y:e.y+(_-e.y)/(1-o)};return new T(t,k,E,e)}static getUtils(){return b}getUtils(){return T.getUtils()}static get PolyBezier(){return v}valueOf(){return this.toString()}toString(){return b.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const t=this.points,n=["M",t[0].x,t[0].y,2===this.order?"Q":"C"];for(let e=1,o=t.length;e<o;e++)n.push(t[e].x),n.push(t[e].y);return n.join(" ")}setRatios(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]}verify(){const t=this.coordDigest();t!==this._print&&(this._print=t,this.update())}coordDigest(){return this.points.map((function(t,n){return""+n+t.x+t.y+(t.z?t.z:0)})).join("")}update(){this._lut=[],this.dpoints=b.derive(this.points,this._3d),this.computedirection()}computedirection(){const t=this.points,n=b.angle(t[0],t[this.order],t[1]);this.clockwise=n>0}length(){return b.length(this.derivative.bind(this))}static getABC(t=2,n,e,o,i=.5){const r=b.projectionratio(i,t),s=1-r,c={x:r*n.x+s*o.x,y:r*n.y+s*o.y},l=b.abcratio(i,t);return{A:{x:e.x+(e.x-c.x)/l,y:e.y+(e.y-c.y)/l},B:e,C:c,S:n,E:o}}getABC(t,n){n=n||this.get(t);let e=this.points[0],o=this.points[this.order];return T.getABC(this.order,e,n,o,t)}getLUT(t){if(this.verify(),t=t||100,this._lut.length===t)return this._lut;this._lut=[],t--;for(let n,e,o=0;o<t;o++)e=o/(t-1),n=this.compute(e),n.t=e,this._lut.push(n);return this._lut}on(n,e){e=e||5;const o=this.getLUT(),i=[];for(let t,r=0,s=0;r<o.length;r++)t=o[r],b.dist(t,n)<e&&(i.push(t),s+=r/o.length);return!!i.length&&(t/=i.length)}project(t){const n=this.getLUT(),e=n.length-1,o=b.closest(n,t),i=o.mpos,r=(i-1)/e,s=(i+1)/e,c=.1/e;let l,a,u=o.mdist,h=r,f=h;for(u+=1;h<s+c;h+=c)l=this.compute(h),a=b.dist(t,l),a<u&&(u=a,f=h);return f=f<0?0:f>1?1:f,l=this.compute(f),l.t=f,l.d=u,l}get(t){return this.compute(t)}point(t){return this.points[t]}compute(t){return this.ratios?b.computeWithRatios(t,this.points,this.ratios,this._3d):b.compute(t,this.points,this._3d,this.ratios)}raise(){const t=this.points,n=[t[0]],e=t.length;for(let o,i,r=1;r<e;r++)o=t[r],i=t[r-1],n[r]={x:(e-r)/e*o.x+r/e*i.x,y:(e-r)/e*o.y+r/e*i.y};return n[e]=t[e-1],new T(n)}derivative(t){return b.compute(t,this.dpoints[0],this._3d)}dderivative(t){return b.compute(t,this.dpoints[1],this._3d)}align(){let t=this.points;return new T(b.align(t,{p1:t[0],p2:t[t.length-1]}))}curvature(t){return b.curvature(t,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return b.inflections(this.points)}normal(t){return this._3d?this.__normal3(t):this.__normal2(t)}__normal2(t){const n=this.derivative(t),e=M(n.x*n.x+n.y*n.y);return{x:-n.y/e,y:n.x/e}}__normal3(t){const n=this.derivative(t),e=this.derivative(t+.01),o=M(n.x*n.x+n.y*n.y+n.z*n.z),i=M(e.x*e.x+e.y*e.y+e.z*e.z);n.x/=o,n.y/=o,n.z/=o,e.x/=i,e.y/=i,e.z/=i;const r={x:e.y*n.z-e.z*n.y,y:e.z*n.x-e.x*n.z,z:e.x*n.y-e.y*n.x},s=M(r.x*r.x+r.y*r.y+r.z*r.z);r.x/=s,r.y/=s,r.z/=s;const c=[r.x*r.x,r.x*r.y-r.z,r.x*r.z+r.y,r.x*r.y+r.z,r.y*r.y,r.y*r.z-r.x,r.x*r.z-r.y,r.y*r.z+r.x,r.z*r.z];return{x:c[0]*n.x+c[1]*n.y+c[2]*n.z,y:c[3]*n.x+c[4]*n.y+c[5]*n.z,z:c[6]*n.x+c[7]*n.y+c[8]*n.z}}hull(t){let n=this.points,e=[],o=[],i=0;for(o[i++]=n[0],o[i++]=n[1],o[i++]=n[2],3===this.order&&(o[i++]=n[3]);n.length>1;){e=[];for(let r,s=0,c=n.length-1;s<c;s++)r=b.lerp(t,n[s],n[s+1]),o[i++]=r,e.push(r);n=e}return o}split(t,n){if(0===t&&n)return this.split(n).left;if(1===n)return this.split(t).right;const e=this.hull(t),o={left:2===this.order?new T([e[0],e[3],e[5]]):new T([e[0],e[4],e[7],e[9]]),right:2===this.order?new T([e[5],e[4],e[2]]):new T([e[9],e[8],e[6],e[3]]),span:e};return o.left._t1=b.map(0,0,1,this._t1,this._t2),o.left._t2=b.map(t,0,1,this._t1,this._t2),o.right._t1=b.map(t,0,1,this._t1,this._t2),o.right._t2=b.map(1,0,1,this._t1,this._t2),n?(n=b.map(n,t,1,0,1),o.right.split(n).left):o}extrema(){const t={};let n=[];return this.dims.forEach(function(e){let o=function(t){return t[e]},i=this.dpoints[0].map(o);t[e]=b.droots(i),3===this.order&&(i=this.dpoints[1].map(o),t[e]=t[e].concat(b.droots(i))),t[e]=t[e].filter((function(t){return t>=0&&t<=1})),n=n.concat(t[e].sort(b.numberSort))}.bind(this)),t.values=n.sort(b.numberSort).filter((function(t,e){return n.indexOf(t)===e})),t}bbox(){const t=this.extrema(),n={};return this.dims.forEach(function(e){n[e]=b.getminmax(this,e,t[e])}.bind(this)),n}overlaps(t){const n=this.bbox(),e=t.bbox();return b.bboxoverlap(n,e)}offset(t,n){if(void 0!==n){const e=this.get(t),o=this.normal(t),i={c:e,n:o,x:e.x+o.x*n,y:e.y+o.y*n};return this._3d&&(i.z=e.z+o.z*n),i}if(this._linear){const n=this.normal(0),e=this.points.map((function(e){const o={x:e.x+t*n.x,y:e.y+t*n.y};return e.z&&n.z&&(o.z=e.z+t*n.z),o}));return[new T(e)]}return this.reduce().map((function(n){return n._linear?n.offset(t)[0]:n.scale(t)}))}simple(){if(3===this.order){const t=b.angle(this.points[0],this.points[3],this.points[1]),n=b.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&n<0||t<0&&n>0)return!1}const t=this.normal(0),n=this.normal(1);let e=t.x*n.x+t.y*n.y;return this._3d&&(e+=t.z*n.z),z(A(e))<C/3}reduce(){let t,n,e=0,o=0,i=.01,r=[],s=[],c=this.extrema().values;for(-1===c.indexOf(0)&&(c=[0].concat(c)),-1===c.indexOf(1)&&c.push(1),e=c[0],t=1;t<c.length;t++)o=c[t],n=this.split(e,o),n._t1=e,n._t2=o,r.push(n),e=o;return r.forEach((function(t){for(e=0,o=0;o<=1;)for(o=e+i;o<=1.01;o+=i)if(n=t.split(e,o),!n.simple()){if(o-=i,z(e-o)<i)return[];n=t.split(e,o),n._t1=b.map(e,0,1,t._t1,t._t2),n._t2=b.map(o,0,1,t._t1,t._t2),s.push(n),e=o;break}e<1&&(n=t.split(e,1),n._t1=b.map(e,0,1,t._t1,t._t2),n._t2=t._t2,s.push(n))})),s}scale(t){const n=this.order;let e=!1;if("function"==typeof t&&(e=t),e&&2===n)return this.raise().scale(e);const o=this.clockwise,i=e?e(0):t,r=e?e(1):t,s=[this.offset(0,10),this.offset(1,10)],c=this.points,l=[],a=b.lli4(s[0],s[0].c,s[1],s[1].c);if(!a)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(t){const e=l[t*n]=b.copy(c[t*n]);e.x+=(t?r:i)*s[t].n.x,e.y+=(t?r:i)*s[t].n.y})),e?([0,1].forEach((function(i){if(2!==n||!i){var r=c[i+1],s={x:r.x-a.x,y:r.y-a.y},u=e?e((i+1)/n):t;e&&!o&&(u=-u);var h=M(s.x*s.x+s.y*s.y);s.x/=h,s.y/=h,l[i+1]={x:r.x+u*s.x,y:r.y+u*s.y}}})),new T(l)):([0,1].forEach((t=>{if(2===n&&t)return;const e=l[t*n],o=this.derivative(t),i={x:e.x+o.x,y:e.y+o.y};l[t+1]=b.lli4(e,i,a,c[t+1])})),new T(l))}outline(t,n,e,o){n=void 0===n?t:n;const i=this.reduce(),r=i.length,s=[];let c,l=[],a=0,u=this.length();const h=void 0!==e&&void 0!==o;function f(t,n,e,o,i){return function(r){const s=o/e,c=(o+i)/e,l=n-t;return b.map(r,0,1,t+s*l,t+c*l)}}i.forEach((function(i){const r=i.length();h?(s.push(i.scale(f(t,e,u,a,r))),l.push(i.scale(f(-n,-o,u,a,r)))):(s.push(i.scale(t)),l.push(i.scale(-n))),a+=r})),l=l.map((function(t){return c=t.points,c[3]?t.points=[c[3],c[2],c[1],c[0]]:t.points=[c[2],c[1],c[0]],t})).reverse();const p=s[0].points[0],y=s[r-1].points[s[r-1].points.length-1],x=l[r-1].points[l[r-1].points.length-1],d=l[0].points[0],g=b.makeline(x,p),m=b.makeline(y,d),w=[g].concat(s).concat([m]).concat(l);return w.length,new v(w)}outlineshapes(t,n,e){n=n||t;const o=this.outline(t,n).curves,i=[];for(let t=1,n=o.length;t<n/2;t++){const r=b.makeshape(o[t],o[n-t],e);r.startcap.virtual=t>1,r.endcap.virtual=t<n/2-1,i.push(r)}return i}intersects(t,n){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof T&&(t=t.reduce()),this.curveintersects(this.reduce(),t,n)):this.selfintersects(n)}lineIntersects(t){const n=_(t.p1.x,t.p2.x),e=_(t.p1.y,t.p2.y),o=k(t.p1.x,t.p2.x),i=k(t.p1.y,t.p2.y);return b.roots(this.points,t).filter((t=>{var r=this.get(t);return b.between(r.x,n,o)&&b.between(r.y,e,i)}))}selfintersects(t){const n=this.reduce(),e=n.length-2,o=[];for(let i,r,s,c=0;c<e;c++)r=n.slice(c,c+1),s=n.slice(c+2),i=this.curveintersects(r,s,t),o.push(...i);return o}curveintersects(t,n,e){const o=[];t.forEach((function(t){n.forEach((function(n){t.overlaps(n)&&o.push({left:t,right:n})}))}));let i=[];return o.forEach((function(t){const n=b.pairiteration(t.left,t.right,e);n.length>0&&(i=i.concat(n))})),i}arcs(t){return t=t||.5,this._iterate(t,[])}_error(t,n,e,o){const i=(o-e)/4,r=this.get(e+i),s=this.get(o-i),c=b.dist(t,n),l=b.dist(t,r),a=b.dist(t,s);return z(l-c)+z(a-c)}_iterate(t,n){let e,o=0,i=1;do{e=0,i=1;let r,s,c,l,a,u=this.get(o),h=!1,f=!1,p=i,y=1,x=0;do{if(f=h,l=c,p=(o+i)/2,x++,r=this.get(p),s=this.get(i),c=b.getccenter(u,r,s),c.interval={start:o,end:i},h=this._error(c,u,o,i)<=t,a=f&&!h,a||(y=i),h){if(i>=1){if(c.interval.end=y=1,l=c,i>1){let t={x:c.x+c.r*E(c.e),y:c.y+c.r*S(c.e)};c.e+=b.angle({x:c.x,y:c.y},t,this.get(1))}break}i+=(i-o)/2}else i=p}while(!a&&e++<100);if(e>=100)break;l=l||c,n.push(l),o=y}while(i<1);return n}}const O=.04,N=.16,F=.1;function j(t,n){return"number"==typeof t&&isFinite(t)&&t>=0?t:"cell"===n?.5:.24}function B(t,n,e){if("number"==typeof t&&isFinite(t))return{row:e.row,column:e.column+t};if("string"!=typeof t)return"from"===n?{row:e.row,column:e.column}:{row:e.row,column:e.column+1};const[o,i]=t.split(/\s+/,2).map((t=>Number(t??0)));return isFinite(o)&&isFinite(i)?{row:e.row+i,column:e.column+o}:t}function P(t){if("number"==typeof t&&isFinite(t))return{angle:t,strength:1};if(!0===t)return{angle:30,strength:1};if("right"===t)return{angle:-30,strength:1};if("string"!=typeof t)return;let[n,e]=t.split(/\s+/,2).map(Number);return isFinite(n)||(n=0),isFinite(e)||(e=1),{angle:n,strength:e}}function G(t){return"number"==typeof t&&isFinite(t)?t:!0===t?.24:"right"===t?-.24:0}function q(t){return"number"==typeof t&&isFinite(t)&&t>=0?t:O}function I(t){return"two"===t||"three"===t||"squiggle"===t?t:"one"}function U(t,n,e){return"none"===t?t:"arrow"===t?"three"===e?"arrow3":"two"===e?"arrow2":t:"bar"===t?"three"===e?"bar3":"two"===e?"bar2":t:"harpoon"===t||"-harpoon"===t||"hook"===t||"-hook"===t||"loop"===t||"-loop"===t||"two"===t||"tail"===t?"three"===e||"two"===e?"none":t:"tail"===n?"none":"three"===e?"arrow3":"two"===e?"arrow2":"arrow"}function R(t){return"number"==typeof t&&t>=0&&t<=1?t:.5}function $(t){return"number"==typeof t&&isFinite(t)?t:"right"===t?-.8:.8}function D(t){return!0===t?t:"string"==typeof t&&(t=t.trim()).length>0&&t.split(/\s+/)}function L(t){return{x:Math.cos(t/180*Math.PI),y:-Math.sin(t/180*Math.PI)}}function W(t){const n=Math.acos(t.x)/Math.PI*180;return t.y<=0?n:360-n}function J(t,n,e){if((t%=360)<0&&(t+=360),0===t)return{x:n.x+e.width/2,y:n.y};if(180===t)return{x:n.x-e.width/2,y:n.y};if(90===t)return{x:n.x,y:n.y-e.top};if(270===t)return{x:n.x,y:n.y+e.bottom};const o=Math.abs(Math.tan(t/180*Math.PI));if(t<90){const t=Math.min(e.width/2,e.top/o),i=Math.min(e.top,e.width*o/2);return{x:n.x+t,y:n.y-i}}if(t<180){const t=Math.min(e.width/2,e.top/o),i=Math.min(e.top,e.width*o/2);return{x:n.x-t,y:n.y-i}}if(t<270){const t=Math.min(e.width/2,e.bottom/o),i=Math.min(e.bottom,e.width*o/2);return{x:n.x-t,y:n.y+i}}const i=Math.min(e.width/2,e.bottom/o),r=Math.min(e.bottom,e.width*o/2);return{x:n.x+i,y:n.y+r}}const V=[5.4,6.5,4.8,3,2,1,0,0],Y=[4,7,2,3,-2,1,-5.5,0],Z=[1.5,8,-.5,2.5,-5,0],H=[0,0,-2.5,0,-5,0],Q=[0,0,-4,0,-4,-5,0,-5],X=[0,-5,3,-5,3,0],K=[3,0,3,2.5,3,5],tt=[0,5,0,0,0,-5],nt=[0,7.5,0,0,0,-7.5],et=[0,10,0,0,0,-10];function ot(t,n,e){function o(...t){const o=[],i=Math.floor(t.length/2);for(let s=0;s<i;s++){const i=2*s,{x:c,y:l}=(r={x:t[i],y:t[i+1]},{x:e.x+r.x*O*n.x-r.y*O*n.y,y:e.y+r.y*O*n.x+r.x*O*n.y});o.push(c,l)}var r;return o}switch(t){case"harpoon":return[new T(o(...V))];case"-harpoon":return[new T(o(...V.map(((t,n)=>n%2==0?t:-t))))];case"arrow":return[new T(o(...V)),new T(o(...V.map(((t,n)=>n%2==0?t:-t))))];case"arrow2":return[new T(o(...Y)),new T(o(...Y.map(((t,n)=>n%2==0?t:-t))))];case"arrow3":return[new T(o(...Z)),new T(o(...Z.map(((t,n)=>n%2==0?t:-t)))),new T(o(...H))];case"tail":return[new T(o(...V.map(((t,n)=>n%2==0?-t:t)))),new T(o(...V.map((t=>-t))))];case"two":return[new T(o(...V)),new T(o(...V.map(((t,n)=>n%2==0?t:-t)))),new T(o(...V.map(((t,n)=>n%2==0?t+4.5:t)))),new T(o(...V.map(((t,n)=>n%2==0?t+4.5:-t))))];case"hook":return[new T(o(...Q))];case"-hook":return[new T(o(...Q.map(((t,n)=>n%2==0?t:-t))))];case"loop":return[new T(o(...Q)),new T(o(...X)),new T(o(...K))];case"-loop":return[new T(o(...Q.map(((t,n)=>n%2==0?t:-t)))),new T(o(...X.map(((t,n)=>n%2==0?t:-t)))),new T(o(...K.map(((t,n)=>n%2==0?t:-t))))];case"bar":return[new T(o(...tt))];case"bar2":return[new T(o(...nt))];case"bar3":return[new T(o(...et))];case"none":return[]}}function it(t){let n=0;const e=[];for(const o of t){const t=o.length();t>0&&(n+=t,e.push({length:t,bezier:o}))}if(n<1||0===e.length)return t;const o=.25,i=Math.floor(n/o)-1,r=o,s=i*o,c=[];let l,a=0,u=0;for(const{length:t,bezier:n}of e){const e=u+t;if(u<r&&(e<=r?c.push(n):c.push(n.split(0,(r-u)/t))),a<i)for(;;){const r=(a+1)*o;if(r>e)break;const s=n.get((r-u)/t);if(void 0!==l){const t=s.x-l.x,n=s.y-l.y,e=Math.sqrt(t**2+n**2);if(e>0){const o={x:t/e,y:n/e},i={x:(l.x+s.x)/2,y:(l.y+s.y)/2};a%2==1?(i.x+=o.y*F,i.y-=o.x*F):(i.x-=o.y*F,i.y+=o.x*F),c.push(new T(l.x,l.y,(l.x+i.x)/2,(l.y+i.y)/2,i.x,i.y)),c.push(new T(i.x,i.y,(i.x+s.x)/2,(i.y+s.y)/2,s.x,s.y))}}if(l=s,a++,a===i)break}e>s&&(u>=s?c.push(n):c.push(n.split((s-u)/t,1))),u=e}return c}function rt(t,n){const e=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.width="0",e.style.display="flex",e.style.justifyContent="center",i.style.display="inline-block",r.style.display="inline-block",r.style.verticalAlign="-0.5ex",r.style.width="max-content",n.after(e),e.append(o),o.append(i),o.append(r),r.append(t),{leftControler:e,topControler:i,container:r}}function st(t,n,e,o){const{height:i,width:r}=t.container.getBoundingClientRect(),s=i*n,c=r*e;t.topControler.style.height=s+"em";const{top:l}=t.topControler.getBoundingClientRect(),{top:a}=t.container.getBoundingClientRect(),u=Math.min(s,(a-l)*n);return{height:s+2*o,width:c+2*o,top:s-u+o,bottom:u+o}}function ct(t,n){t.leftControler.style.left=n.x+"em",t.topControler.style.height=n.y+"em"}const lt=async(t,o)=>{const i="number"==typeof(s=t.options["draw-delay"]??r("draw-delay","cd",o.context.tagToGlobalOptions))&&isFinite(s)&&s>=0?1e3*s:1e3;var s;const c=function(t){return"number"==typeof t&&isFinite(t)&&t>=1&&t%1==0?t:1}(t.options["draw-num"]??r("draw-num","cd",o.context.tagToGlobalOptions)),l=function(t){if("number"==typeof t&&isFinite(t))return{row:t,column:t};if("string"==typeof t){let[n,e]=t.split(/\s+/,2).map(Number);return(!isFinite(n)||n<0)&&(n=2.4),(!isFinite(e)||e<0)&&(e=1.8),{row:e,column:n}}return{row:1.8,column:2.4}}(t.options.gap??r("gap","cd",o.context.tagToGlobalOptions)),a=j(t.options["cell-margin"]??r("cell-margin","cd",o.context.tagToGlobalOptions),"cell"),u=document.createElement("div"),h=document.createElementNS("http://www.w3.org/2000/svg","svg");u.classList.add("cd"),u.style.position="relative",h.style.position="absolute",h.style.left="0",h.style.top="0",u.append(h);let f={children:[],id:""},p=[f];const y=[p],x=[],d={};function g(t){const n=(e=t,Array.from(e.slice(0,100).matchAll(/[a-zA-Z0-9]+/g)).join("-").toLowerCase());var e;const o=d[n]=(d[n]??0)+1;return o>1||0===n.length?`${n}~${o}`:n}function m(n,i){const s=[],c={tag:"katex"===i?i:"div",options:{},children:[]};for(const i of n){if(0===i.length){c.children.push(i);continue}const n=i[0];if("string"==typeof n){c.children.push(i);continue}let{at:l,shift:a,margin:u}=n.options,h=n.options["cd-id"];void 0===l&&void 0===a&&void 0===u&&void 0===h?c.children.push(i):("string"!=typeof h&&(h=e(n)),s.push({at:R(l),shift:$(a),margin:j(u??t.options["label-margin"]??r("label-margin","cd",o.context.tagToGlobalOptions),"label"),unit:n,id:g(h),clear:D(n.options.clear)}))}if(c.children.length>0){const n=e(c);s.push({at:.5,shift:.8,margin:j(t.options["label-margin"]??r("label-margin","cd",o.context.tagToGlobalOptions),"label"),unit:c,id:g(n),clear:!1})}return s}for(const e of t.children)if(0!==e.length){{const n=e[0];if("string"!=typeof n){if("ar"===n.tag||"katex"===n.tag&&!0===n.options.ar){const e={row:y.length-1,column:p.length-1},i=I(n.options.body),s=m(n.children,n.tag);x.push({from:B(n.options.from,"from",e),to:B(n.options.to,"to",e),out:P(n.options.out),in:P(n.options.in),bend:P(n.options.bend),shift:G(n.options.shift),margin:j(n.options.margin??t.options["arrow-margin"]??r("arrow-margin","cd",o.context.tagToGlobalOptions),"arrow"),width:q(n.options.width??t.options["arrow-width"]??r("arrow-width","cd",o.context.tagToGlobalOptions)),body:i,head:U(n.options.head,"head",i),tail:U(n.options.tail,"tail",i),labels:s,class:"string"==typeof n.options.class?n.options.class:"",style:"string"==typeof n.options.style?n.options.style:"",clear:D(n.options.clear)});continue}}else{if("&"===n&&1===e.length){p.push(f={children:[],id:""});continue}if("\\"===n&&2===e.length&&"\\"===e[1]){y.push(p=[f={children:[],id:""}]);continue}}}if(f.children.push(e),0===f.id.length){const t=n(e);t.length>0&&(f.id=g(t))}}else f.children.push(e);const w={},b=[];for(let n=0;n<y.length;n++){const e=y[n];for(let i=0;i<e.length;i++){const{children:r,id:s}=e[i];0!==r.length&&(b.push({element:rt("CD"===t.tag?await o.compileUnit({tag:"katex",options:{},children:r}):await o.compileSTDN(r),h),position:{row:n,column:i},id:s}),s.length>0&&(w[s]=!0))}}const v={},z=[];let _=x;for(;;){const t=[];for(const n of _){const{from:e,to:i}=n;if("string"!=typeof e||w[e])if("string"!=typeof i||w[i]){z.push(n);for(const{unit:t,id:e}of n.labels){const n=rt(await o.compileUnit(t),h);!0!==t.options["normal-font-size"]&&(n.container.style.fontSize="var(--length-font-log)"),v[e]=n,w[e]=!0}}else t.push(n);else t.push(n)}if(_.length===t.length)break;_=t}function k(){h.innerHTML="";const t=[],n=[],e=Number(getComputedStyle(u).fontSize.slice(0,-2));let o=1/e,i=1/e;const r=u.closest("foreignObject");if(null!==r){const{height:t,width:n}=r.getBoundingClientRect();o*=r.height.animVal.value/t,i*=r.width.animVal.value/n}const s={},c={};for(const{element:e,position:r,id:l}of b){const u=st(e,o,i,a);s[r.row+" "+r.column]=u,l.length>0&&(c[l]=u),(t[r.row]??0)<u.height&&(t[r.row]=u.height),(n[r.column]??0)<u.width&&(n[r.column]=u.width)}function f(e){let o=e.column>=0?(n[0]??0)/2:0,i=e.row>=0?(t[0]??0)/2:0;for(let t=1;t<=e.column;t++){const e=n[t-1],i=n[t];void 0!==e&&(o+=e/2,void 0!==i&&(o+=l.column)),void 0!==i&&(o+=i/2)}if(e.column%1!=0){const t=Math.floor(e.column),i=n[t],r=n[t+1];void 0!==i&&(o+=(e.column-t)*i/2,void 0!==r&&(o+=(e.column-t)*l.column)),void 0!==r&&(o+=(e.column-t)*r/2)}for(let n=1;n<=e.row;n++){const e=t[n-1],o=t[n];void 0!==e&&(i+=e/2,void 0!==o&&(i+=l.row)),void 0!==o&&(i+=o/2)}if(e.row%1!=0){const n=Math.floor(e.row),o=t[n],r=t[n+1];void 0!==o&&(i+=(e.row-n)*o/2,void 0!==r&&(i+=(e.row-n)*l.row)),void 0!==r&&(i+=(e.row-n)*r/2)}return{x:o,y:i}}const p={};for(const{position:t,id:n}of b){const e=f(t);n.length>0&&(p[n]=e)}let y=0,x=0,d=f({row:0,column:n.length}).x,g=f({row:t.length,column:0}).y;function m(t,n,e){const o=[];for(const e of t){o.push(e.toSVG());const{x:t,y:i}=e.bbox(),r=t.min-n/2,s=t.max+n/2,c=i.min-n/2,l=i.max+n/2;r<y&&(y=r),s>d&&(d=s),c<x&&(x=c),l>g&&(g=l)}const i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",o.join(" ")),i.style.strokeWidth=n+"px",i.style.fill="none",e.append(i),o}function w(t,n,e,o){const i=t.offset(-e);return Array.isArray(i)?m(i,n,o):[]}function _(t,n,e,o){const i=t.offset(-e);return Array.isArray(i)?m(it(i),n,o):[]}const k=[],E=[],S=[],A=[];for(const{from:t,to:n,out:e,in:r,bend:l,head:a,tail:u,shift:b,body:E,class:S,style:M,labels:C,clear:O,margin:j,width:B}of z){let z,P,G,q,I,U,R,$,D,V;if("string"!=typeof t){z=f(t);const n=s[t.row+" "+t.column];G=void 0===n?{height:0,width:0,top:0,bottom:0}:n}else{const n=p[t],e=c[t];if(void 0===n||void 0===e)continue;z=n,G=e}if("string"!=typeof n){P=f(n);const t=s[n.row+" "+n.column];q=void 0===t?{height:0,width:0,top:0,bottom:0}:t}else{const t=p[n],e=c[n];if(void 0===t||void 0===e)continue;P=t,q=e}if(void 0===e||void 0===r){const t=P.x-z.x,n=P.y-z.y,o=Math.sqrt(t**2+n**2);if(0===o)continue;const i=W({x:t/o,y:n/o});let s=0,c=1;if(void 0!==l&&(s=l.angle,c=l.strength),void 0===e){const t=i+s;I=J(t,z,G),R=L(t),D=c}else I=J(e.angle,z,G),R=L(e.angle),D=e.strength;if(void 0===r){const t=i+180-s;U=J(t,P,q),$=L(t),V=c}else U=J(r.angle,P,q),$=L(r.angle),V=r.strength}else I=J(e.angle,z,G),U=J(r.angle,P,q),R=L(e.angle),$=L(r.angle),D=e.strength,V=r.strength;"arrow2"!==a&&"arrow3"!==a&&"hook"!==a&&"-hook"!==a&&"loop"!==a&&"-loop"!==a&&"tail"!==a||(U.x=U.x+$.x*N,U.y=U.y+$.y*N),"arrow2"!==u&&"arrow3"!==u&&"hook"!==u&&"-hook"!==u&&"loop"!==u&&"-loop"!==u&&"tail"!==u||(I.x=I.x+R.x*N,I.y=I.y+R.y*N);const Y=Math.sqrt((U.x-I.x)**2+(U.y-I.y)**2);if(0===Y)continue;const Z={x:I.x+R.x*Y/3*D,y:I.y+R.y*Y/3*D},H={x:U.x+$.x*Y/3*V,y:U.y+$.y*Y/3*V},Q=new T(I.x,I.y,Z.x,Z.y,H.x,H.y,U.x,U.y),X=document.createElementNS("http://www.w3.org/2000/svg","g");try{X.setAttribute("class",S)}catch(t){console.log(t)}try{X.setAttribute("style",M)}catch(t){console.log(t)}h.append(X);const K=[];let tt=!1;"three"===E?(K.push(...w(Q,B,b+.2,X)),K.push(...w(Q,B,b,X)),K.push(...w(Q,B,b-.2,X))):"two"===E?(K.push(...w(Q,B,b+F,X)),K.push(...w(Q,B,b-F,X))):"squiggle"===E?K.push(..._(Q,B,b,X)):(K.push(...w(Q,B,b,X)),tt=!0);{const t=ot(a,$,{x:U.x-$.y*b,y:U.y+$.x*b});t.length>0&&(K.push(...m(t,B,X)),tt=!1)}{const t=ot(u,R,{x:I.x+R.y*b,y:I.y-R.x*b});t.length>0&&(K.push(...m(t,B,X)),tt=!1)}if(!1!==O&&K.length>0&&A.push({data:{type:"path",drawString:K.join(" "),width:2*j+B},clear:!0===O?k.length:O}),tt){const t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width",B.toString()),t.setAttribute("height",B.toString()),t.style.stroke=t.style.fill="none",X.append(t)}k.push(X);for(const{at:t,shift:n,id:e,clear:r,margin:s}of C){const l=Q.get(t),a=Q.normal(t);let u=b+n;0!==n&&("three"===E?u+=.2*Math.sign(n):"two"!==E&&"squiggle"!==E||(u+=F*Math.sign(n)));const h={x:l.x-a.x*u,y:l.y-a.y*u};p[e]=h;const f=v[e];if(void 0===f)throw new Error;const m=st(f,o,i,s);c[e]=m;const w=h.x-m.width/2,z=h.x+m.width/2,_=h.y-m.top,S=h.y+m.bottom;w<y&&(y=w),z>d&&(d=z),_<x&&(x=_),S>g&&(g=S),!1!==r&&A.push({data:{type:"box",x:w.toString(),y:_.toString(),width:m.width.toString(),height:m.height.toString()},clear:!0===r?k.length:r})}}A.forEach((function({data:t,clear:n}){for(let e=0;e<k.length;e++){const o=k[e];t:{if("number"!=typeof n){for(const t of n)if(o.classList.contains(t))break t;continue}if(e>=n)break}let i=E[e];if(void 0===i){i=E[e]=document.createElementNS("http://www.w3.org/2000/svg","mask");const t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.style.fill="white",h.append(i),i.append(t),S.push(t);const n=Math.random().toString();i.id=n,o.style.mask=`url(#${n})`}if("path"===t.type){const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.style.strokeWidth=t.width+"px",n.style.stroke="black",n.style.fill="none",n.setAttribute("d",t.drawString),i.append(n);continue}const r=document.createElementNS("http://www.w3.org/2000/svg","rect");r.style.stroke="none",r.style.fill="black",r.setAttribute("x",t.x),r.setAttribute("y",t.y),r.setAttribute("width",t.width),r.setAttribute("height",t.height),i.append(r)}}));const M=d-y,C=g-x;u.style.width=h.style.width=M+"em",u.style.height=h.style.height=C+"em",h.setAttribute("viewBox",`${y} ${x} ${M} ${C}`);for(const{element:t,position:n}of b){const e=f(n);ct(t,{x:e.x-y,y:e.y-x})}for(const t of Object.keys(v)){const n=v[t],e=p[t];void 0!==n&&void 0!==e&&ct(n,{x:e.x-y,y:e.y-x})}for(const t of S)t.setAttribute("x",y.toString()),t.setAttribute("y",x.toString()),t.setAttribute("width",M.toString()),t.setAttribute("height",C.toString())}const E=new MutationObserver((async()=>{if(u.isConnected){E.disconnect(),await new Promise((t=>setTimeout(t,i)));for(let t=0;t<c;t++)k(),await new Promise((t=>setTimeout(t,1e3)))}}));return E.observe(document.body,{childList:!0,subtree:!0}),u},at=lt})();var r=i.CD,s=i.W7,c=i.aC,l=i.cd,a=i.ib,u=i.Zg,h=i.rY,f=i.in,p=i.$U,y=i.AY;export{r as CD,s as absoluteElementToBox,c as angleToD,l as cd,a as createAbsoluteElement,u as createArrowMark,h as dToAngle,f as getEdgePoint,p as piecesToSquiggle,y as placeAbsoluteElement};